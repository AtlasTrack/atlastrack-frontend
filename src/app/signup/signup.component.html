<div class="container-fluid d-flex align-items-center justify-content-center mainContainer">
  <div class="row w-100">
    <!-- Left Section -->
    <div class="col-md-8 d-none d-md-flex align-items-center justify-content-center">
      <img src="assets/loginLeft.png" alt="" class="col-12 loginbgImg">
      <img src="assets/logo_icon.png" alt="" class="logoImg">
    </div>
    <!-- Right Section -->
    <div class="col-md-4 col-12 d-flex align-items-center justify-content-center rightSection">
      <div class="login-form text-center w-90">
        <p class="title mb-4">CREATE AN ACCOUNT</p>
    
        <form [formGroup]="signupForm" (ngSubmit)="onSignupClick()" class="pt-3">
          <!-- Email Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('email')">
              <span class="input-group-text fieldIcons border-0">
                <i class="bi bi-envelope"></i>
              </span>
              <input 
                type="email" 
                class="form-control border-0" 
                placeholder="Email Address"
                formControlName="email">
            </div>
          </div>

          <!-- Full Name Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('fullName')">
              <span class="input-group-text fieldIcons border-0">
                <i class="bi bi-person"></i>
              </span>
              <input 
                type="text" 
                class="form-control border-0" 
                placeholder="Full Name"
                formControlName="fullName">
            </div>
          </div>

        <!-- Phone Number Field with Country Flag Dropdown (Flag only) -->
<div class="mb-4 fieldContainer">
  <div class="input-group" [class.invalid-border]="isFieldInvalid('phoneNumber')">
    <span class="input-group-text fieldIcons border-0 text-muted">
      <select 
        formControlName="countryCode"
        (change)="onCountryCodeChange($event)"
        class="form-select border-0 bg-transparent"
        style="min-width: 60px; padding-right: 20px;">
        <option *ngFor="let country of countrycode" [value]="country.code" title="{{ country.country }} ({{ country.code }})">
          {{ country.flag }}
        </option>
      </select>
    </span>
    <input 
      type="tel" 
      class="form-control border-0" 
      placeholder="Phone Number"
      formControlName="phoneNumber"
      (input)="onPhoneInput($event)">
  </div>
  <!-- <div class="text-muted mt-1 small" *ngIf="selectedCountryCode">
    Selected: {{ getSelectedCountryName() }} ({{ selectedCountryCode }})
  </div> -->
</div>
          <div *ngIf="isFieldInvalid('phoneNumber')" class="mb-4 invalid-feedback d-block">
            Please enter a valid phone number (10-15 digits)
          </div>

          <!-- Password Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('password')">
              <span class="input-group-text fieldIcons border-0">
                <i class="bi bi-lock"></i>
              </span>
              <input 
                [type]="showPassword ? 'text' : 'password'"
                class="form-control border-0" 
                placeholder="Password"
                formControlName="password">
              <span class="input-group-text fieldIcons border-0 cursor-pointer" (click)="togglePasswordVisibility('password')">
                <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </span>
            </div>
          </div>

          <div *ngIf="isFieldInvalid('password')" class="mb-4 text-xs invalid-feedback d-block">
            {{ getErrorMessage('password') }}
          </div>
          <!-- Confirm Password Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('confirmPassword')">
              <span class="input-group-text fieldIcons border-0">
                <i class="bi bi-lock"></i>
              </span>
              <input 
                [type]="showConfirmPassword ? 'text' : 'password'"
                class="form-control border-0" 
                placeholder="Confirm Password"
                formControlName="confirmPassword">
              <span class="input-group-text fieldIcons border-0 cursor-pointer" (click)="togglePasswordVisibility('confirmPassword')">
                <i class="bi" [ngClass]="showConfirmPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
              </span>
            </div>
          </div>

          <!-- Clinic Name Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('clinicName')">
              <input 
                type="text" 
                class="form-control border-0" 
                placeholder="Clinic Name"
                formControlName="clinicName">
            </div>
          </div>

          <!-- Clinic Address Field -->
          <div class="mb-4 fieldContainer">
            <div class="input-group" [class.invalid-border]="isFieldInvalid('clinicAddress')">
              <input 
                type="text" 
                class="form-control border-0" 
                placeholder="Clinic Address"
                formControlName="clinicAddress">
            </div>
          </div>

          <button type="submit" class="btn btn-primary w-100 py-2">
            Sign Up
          </button>
        </form>
      
      </div>
    </div>
  </div>
  <app-notification-popup [isOpen]="showPopup" [message]="popupMessage" [type]="popupType" (onClose)="closePopup()"></app-notification-popup>
</div>